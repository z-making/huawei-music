let t=document.createElement("div");t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",document.body.appendChild(t),t.innerHTML='\n<?xml version="1.0" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg style="display:none" width="0" height="0" t="1641797799438" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1157" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32">\n  <symbol id="icon-circle" t="1641797799438" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1157" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32">\n    <defs><style type="text/css"></style></defs><path d="M594.048 937.472c33.6 35.072-21.504 88.896-59.456 55.04-38.528-34.56-77.184-69.056-115.776-103.616-16.192-14.464-15.744-42.688-0.384-57.344 38.08-36.608 76.096-73.216 114.176-109.76 36.608-35.008 91.648 17.216 60.864 53.504 189.824-22.016 258.112-230.336 155.008-379.968-59.648-86.144 78.08-163.136 137.088-77.696C1065.216 577.856 895.808 904.384 594.048 937.472L594.048 937.472zM157.44 706.112C-22.272 445.952 147.072 119.68 448.64 86.464 415.104 51.456 470.208-2.432 508.096 31.488c38.592 34.432 77.12 68.928 115.84 103.552C640 149.376 639.68 177.6 624.32 192.384 586.24 228.928 548.288 265.408 510.144 301.952c-36.48 35.072-91.584-17.216-60.8-53.376-189.76 21.888-258.112 230.272-154.88 379.84C353.984 714.432 216.384 791.488 157.44 706.112L157.44 706.112z" fill="#8f8f92" p-id="1158"></path>\n  </symbol>\n  <symbol id="icon-pre" t="1641795974436" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1565" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32">\n    <defs><style type="text/css"></style></defs><path d="M206 865h-38c-30.928 0-56-25.072-56-56V216c0-30.928 25.072-56 56-56h38c30.928 0 56 25.072 56 56v593c0 30.928-25.072 56-56 56z m168.686-386.191l422.304-303.4c32.294-23.201 77.282-15.83 100.484 16.464A72 72 0 0 1 911 233.883v559.053c0 39.764-32.235 72-72 72a72 72 0 0 1-39.95-12.1L376.288 570.877c-25.73-17.16-32.677-51.93-15.517-77.66a56 56 0 0 1 13.915-14.408z" fill="#8f8f92" p-id="1566"></path>\n  </symbol>\n  <symbol id="icon-play" t="1641795861526" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1127" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50">\n    <defs><style type="text/css"></style></defs><path d="M512 928C282.25 928 96 741.75 96 512S282.25 96 512 96s416 186.25 416 416-186.25 416-416 416zM384 304c-17.673 0-32 14.327-32 32v384h96c17.673 0 32-14.327 32-32V304h-96z m192 0c-17.673 0-32 14.327-32 32v384h96c17.673 0 32-14.327 32-32V304h-96z" fill="#8f8f92" p-id="1128"></path>\n  </symbol>\n  <symbol id="icon-pause" t="1642426740118" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1187" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50">\n    <defs><style type="text/css"></style></defs><path d="M512 90.125C279.00236621 90.125 90.125 279.00236621 90.125 512s188.87736622 421.875 421.875 421.875S933.875 744.99763379 933.875 512 744.99763379 90.125 512 90.125z m150.8979614 458.62852341l-193.18513596 172.9981939c-30.93345208 19.30476517-69.72629206-4.82332736-69.72629206-43.44431423v-345.99638782c0-38.60953033 38.7355556-62.74908023 69.72629206-43.44431507l193.18513596 172.99819392c30.99073645 19.31622253 30.99073645 67.58386414 0 86.8886293z" fill="#8f8f92" p-id="1188"></path>\n  </symbol>\n  <symbol id="icon-next" t="1641795978488" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1711" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32">\n    <defs><style type="text/css"></style></defs><path d="M817 160h38c30.928 0 56 25.072 56 56v593c0 30.928-25.072 56-56 56h-38c-30.928 0-56-25.072-56-56V216c0-30.928 25.072-56 56-56zM648.314 546.191l-422.304 303.4c-32.294 23.201-77.282 15.83-100.484-16.464A72 72 0 0 1 112 791.117V232.064c0-39.764 32.235-72 72-72a72 72 0 0 1 39.95 12.1l422.762 281.959c25.73 17.16 32.677 51.93 15.517 77.66a56 56 0 0 1-13.915 14.408z" fill="#8f8f92" p-id="1712"></path>\n  </symbol>\n  <symbol id="icon-list" t="1641795965774" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1273" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32">\n    <defs><style type="text/css"></style></defs><path d="M875.52 433.152q-7.168-1.024-12.8-10.24t-8.704-33.792q-5.12-39.936-26.112-58.88t-65.024-27.136q-46.08-9.216-81.408-37.376t-58.88-52.736q-22.528-21.504-34.816-15.36t-12.288 22.528l0 44.032 0 96.256q0 57.344-0.512 123.904t-0.512 125.952l0 104.448 0 58.368q1.024 24.576-7.68 54.784t-32.768 56.832-64 45.568-99.328 22.016q-60.416 3.072-109.056-21.504t-75.264-61.952-26.112-81.92 38.4-83.456 81.92-54.272 84.992-16.896 73.216 5.632 47.616 13.312l0-289.792q0-120.832 1.024-272.384 0-29.696 15.36-48.64t40.96-22.016q21.504-3.072 35.328 8.704t28.16 32.768 35.328 47.616 56.832 52.224q30.72 23.552 53.76 33.792t43.008 18.944 39.424 20.992 43.008 39.936q23.552 26.624 28.672 55.296t0.512 52.224-14.848 38.4-17.408 13.824z" fill="#8f8f92" p-id="1274"></path>\n  </symbol>\n</svg>';var s=class{constructor(t){if(!t)throw new Error("传递需要绑定的dom元素");let s,i,e,n="string"==typeof t?document.querySelector("node"):t,l={swipLeft:[],swipRight:[]};n.ontouchstart=function(t){s=t.changedTouches[0].pageX},n.ontouchmove=function(t){e&&clearInterval(e),e=setTimeout((()=>{i=t.changedTouches[0].pageX,i-s>10?l.swipRight.forEach((t=>t.bind(n)())):s-i>10&&l.swipLeft.forEach((t=>t.bind(n)()))}),100)},this.on=function(t,s){l[t]&&l[t].push(s)},this.off=function(t,s){let i=l[t].indexOf(s);-1!==i&&l[t].splice(i,1)}}};new class{constructor(t){var s;this.root="string"==typeof t?(s=t,document.querySelector(s)):t,this.$=t=>this.root.querySelector(t),this.$$=t=>this.root.querySelectorAll(t),this.songList=[],this.currentIndex=0,this.audio=new Audio,this.lyricsArr=[],this.lyricIndex=-1,this.btn=this.$(".btn-play-pause"),this.start(),this.bind()}start(){fetch("https://jirengu.github.io/data-mock/huawei-music/music-list.json").then((t=>t.json())).then((t=>{console.log(t),this.songList=t,this.loadSong()}))}bind(){let t=this;this.$(".btn-play-pause").onclick=function(){this.classList.contains("playing")?(t.audio.pause(),this.classList.remove("playing"),this.classList.add("pause"),this.querySelector("use").setAttribute("xlink:href","#icon-pause")):this.classList.contains("pause")&&(t.audio.play(),t.iconPlay())},this.$(".btn-pre").onclick=function(){t.playPrevSong(),t.loadSong()},this.$(".btn-next").onclick=function(){t.playNextSong(),t.loadSong()},this.audio.ontimeupdate=function(){t.locateLyric(),t.setProgerssBar()};let i=new s(this.$(".panels"));i.on("swipLeft",(function(){this.classList.remove("panel1"),this.classList.add("panel2")})),i.on("swipRight",(function(){this.classList.remove("panel2"),this.classList.add("panel1")}))}loadSong(){let t=this.songList[this.currentIndex];this.$(".header h1").innerText=t.title,this.$(".header p").innerText=t.author+"-"+t.albumn,this.audio.src=t.url,this.audio.onloadedmetadata=()=>this.$(".time-end").innerText=this.formateTime(this.audio.duration),this.loadLyrics()}iconPlay(){this.btn.classList.contains("playing")||(this.btn.classList.remove("pause"),this.btn.classList.add("playing"),this.btn.querySelector("use").setAttribute("xlink:href","#icon-play"))}playPrevSong(){this.currentIndex=(this.songList.length+this.currentIndex-1)%this.songList.length,this.audio.src=this.songList[this.currentIndex].url,this.audio.oncanplaythrough=()=>this.audio.play(),this.iconPlay()}playNextSong(){this.currentIndex=(this.songList.length+this.currentIndex+1)%this.songList.length,this.audio.src=this.songList[this.currentIndex].url,this.audio.oncanplaythrough=()=>this.audio.play(),this.iconPlay()}loadLyrics(){fetch(this.songList[this.currentIndex].lyric).then((t=>t.json())).then((t=>{console.log(t.lrc.lyric),this.setLyrics(t.lrc.lyric),window.lyrics=t.lrc.lyric}))}locateLyric(){if(1e3*this.audio.currentTime>this.lyricsArr[this.lyricIndex+1][0]&&this.lyricIndex<this.lyricsArr.length-1){this.lyricIndex++;let t=this.$('[data-time="'+this.lyricsArr[this.lyricIndex][0]+'"]');t&&this.setLyricToCenter(t),this.$$(".panel-effect .lyrics p")[0].innerText=this.lyricsArr[this.lyricIndex][1],this.$$(".panel-effect .lyrics p")[1].innerText=this.lyricsArr[this.lyricIndex+1]?this.lyricsArr[this.lyricIndex+1][1]:"",console.log(this.$$(".panel-effect .lyrics p")[0])}}setLyrics(t){this.lyricIndex=0;let s=document.createDocumentFragment(),i=[];this.lyricsArr=i,t.split(/\n/).filter((t=>t.match(/\[.+?\]/))).forEach((t=>{let s=t.replace(/\[.+?\]/g,"");t.match(/\[.+?\]/g).forEach((t=>{t=t.replace(/[\[\]]/g,"");let e=6e4*parseInt(t.slice(0,2))+1e3*parseInt(t.slice(3,5))+parseInt(t.slice(6));i.push([e,s])}))})),i.filter((t=>""!==t[1].trim())).sort(((t,s)=>t[0]>s[0]?1:-1)).forEach((t=>{let i=document.createElement("p");i.setAttribute("data-time",t[0]),i.innerText=t[1],s.appendChild(i)})),this.$(".panel-lyrics .container").innerHTML="",this.$(".panel-lyrics .container").appendChild(s)}setLyricToCenter(t){let s=t.offsetTop-this.$(".panel-lyrics").offsetHeight/2;console.log(s),s=s>0?s:0,this.$(".panel-lyrics .container").style.transform=`translateY(-${s}px)`,this.$$(".panel-lyrics p").forEach((t=>t.classList.remove("current"))),t.classList.add("current")}setProgerssBar(){let t=100*this.audio.currentTime/this.audio.duration+"%";this.$(".bar .progress").style.width=t,this.$(".time-start").innerText=this.formateTime(this.audio.currentTime)}formateTime(t){let s=parseInt(t/60);s=s>=10?""+s:"0"+s;let i=parseInt(t%60);return i=i>=10?""+i:"0"+i,s+":"+i}}("#player");
//# sourceMappingURL=index.dd04c081.js.map
